null = 'null'
false = 'false'
true = 'true'
data = {
    "page": 1,
    "limit": 1,
    "total": 17,
    "data": [
        {
            "id": 1,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "/menu",
            "title": "菜单管理",
            "menuPermission": [
                "Retrieve",
                "Update",
                "Search",
                "Create",
                "Delete"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "",
            "icon": "navicon",
            "name": "菜单管理",
            "sort": 1,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/menu",
            "component": "system/menu",
            "component_name": "menu",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": 2
        },
        {
            "id": 2,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "",
            "title": "系统管理",
            "menuPermission": null,
            "description": "",
            "modifier": "1",
            "dept_belong_id": "1",
            "icon": "cog",
            "name": "系统管理",
            "sort": 1,
            "is_link": false,
            "is_catalog": true,
            "web_path": "",
            "component": "",
            "component_name": "",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": null
        },
        {
            "id": 10,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "/dictionary",
            "title": "字典管理",
            "menuPermission": [
                "Retrieve",
                "Update",
                "Search",
                "Create",
                "Delete"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "",
            "icon": "book",
            "name": "字典管理",
            "sort": 1,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/dictionary",
            "component": "system/dictionary/index",
            "component_name": "dictionary",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": 17
        },
        {
            "id": 20,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:24",
            "update_datetime": "2022-05-13 13:19:24",
            "path": "/loginLog",
            "title": "登录日志",
            "menuPermission": [
                "Retrieve",
                "Search"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "1",
            "icon": "file-text",
            "name": "登录日志",
            "sort": 1,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/loginLog",
            "component": "system/log/loginLog/index",
            "component_name": "loginLog",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": 15
        },
        {
            "id": 7,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "/menuButton",
            "title": "菜单按钮",
            "menuPermission": [
                "Update",
                "Search",
                "Create",
                "Delete"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "",
            "icon": "dot-circle-o",
            "name": "菜单按钮",
            "sort": 2,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/menuButton",
            "component": "system/menuButton/index",
            "component_name": "menuButton",
            "status": true,
            "cache": false,
            "visible": false,
            "creator": 1,
            "parent": 2
        },
        {
            "id": 8,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "/button",
            "title": "按钮管理",
            "menuPermission": [
                "Update",
                "Search",
                "Create",
                "Delete"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "",
            "icon": "bullseye",
            "name": "按钮管理",
            "sort": 2,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/button",
            "component": "system/button/index",
            "component_name": "button",
            "status": true,
            "cache": false,
            "visible": false,
            "creator": 1,
            "parent": 2
        },
        {
            "id": 11,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "/areas",
            "title": "地区管理",
            "menuPermission": [
                "Retrieve",
                "Update",
                "Search",
                "Create",
                "Delete"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "",
            "icon": "map",
            "name": "地区管理",
            "sort": 2,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/areas",
            "component": "system/areas/index",
            "component_name": "areas",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": 17
        },
        {
            "id": 16,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "/operationLog",
            "title": "操作日志",
            "menuPermission": [
                "Retrieve",
                "Search"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "",
            "icon": "file-code-o",
            "name": "操作日志",
            "sort": 2,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/operationLog",
            "component": "system/log/operationLog/index",
            "component_name": "operationLog",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": 15
        },
        {
            "id": 17,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "",
            "title": "常规配置",
            "menuPermission": null,
            "description": "",
            "modifier": "1",
            "dept_belong_id": "1",
            "icon": "cogs",
            "name": "常规配置",
            "sort": 2,
            "is_link": false,
            "is_catalog": true,
            "web_path": "",
            "component": "",
            "component_name": "",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": null
        },
        {
            "id": 5,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "/dept",
            "title": "部门管理",
            "menuPermission": [
                "Retrieve",
                "Update",
                "Search",
                "Create",
                "Delete"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "1",
            "icon": "bank",
            "name": "部门管理",
            "sort": 3,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/dept",
            "component": "system/dept/index",
            "component_name": "dept",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": 2
        },
        {
            "id": 13,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "/file",
            "title": "附件管理",
            "menuPermission": [
                "Retrieve",
                "Update",
                "Search",
                "Delete"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "",
            "icon": "file-text-o",
            "name": "附件管理",
            "sort": 3,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/file",
            "component": "system/fileList/index",
            "component_name": "file",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": 17
        },
        {
            "id": 15,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "",
            "title": "日志管理",
            "menuPermission": null,
            "description": "",
            "modifier": "1",
            "dept_belong_id": "1",
            "icon": "book",
            "name": "日志管理",
            "sort": 3,
            "is_link": false,
            "is_catalog": true,
            "web_path": "",
            "component": "",
            "component_name": "",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": null
        },
        {
            "id": 4,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "/role",
            "title": "角色管理",
            "menuPermission": [
                "Retrieve",
                "Update",
                "Search",
                "Create",
                "Delete"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "",
            "icon": "address-book",
            "name": "角色管理",
            "sort": 4,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/role",
            "component": "system/role/index",
            "component_name": "role",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": 2
        },
        {
            "id": 18,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "https://django-vue-admin.com",
            "title": "DVAdmin官网",
            "menuPermission": null,
            "description": "",
            "modifier": "1",
            "dept_belong_id": "1",
            "icon": "external-link",
            "name": "DVAdmin官网",
            "sort": 4,
            "is_link": true,
            "is_catalog": false,
            "web_path": "https://django-vue-admin.com",
            "component": "",
            "component_name": "",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": null
        },
        {
            "id": 19,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:24",
            "update_datetime": "2022-05-13 13:19:24",
            "path": "/frontendLog",
            "title": "前端错误日志",
            "menuPermission": null,
            "description": "",
            "modifier": "1",
            "dept_belong_id": "1",
            "icon": "bug",
            "name": "前端错误日志",
            "sort": 4,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/frontendLog",
            "component": "system/log/frontendLog/index",
            "component_name": "frontendLog",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": 15
        },
        {
            "id": 3,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "/user",
            "title": "用户管理",
            "menuPermission": [
                "ResetPwd",
                "Retrieve",
                "Update",
                "Search",
                "Create",
                "Export",
                "Import",
                "Delete"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "",
            "icon": "users",
            "name": "用户管理",
            "sort": 6,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/user",
            "component": "system/user/index",
            "component_name": "user",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": 2
        },
        {
            "id": 9,
            "modifier_name": null,
            "creator_name": "超级管理员",
            "create_datetime": "2022-05-13 13:19:23",
            "update_datetime": "2022-05-13 13:19:23",
            "path": "/apiWhiteList",
            "title": "接口白名单",
            "menuPermission": [
                "Retrieve",
                "Update",
                "Search",
                "Create",
                "Delete"
            ],
            "description": "",
            "modifier": "1",
            "dept_belong_id": "",
            "icon": "compass",
            "name": "接口白名单",
            "sort": 7,
            "is_link": false,
            "is_catalog": false,
            "web_path": "/apiWhiteList",
            "component": "system/whiteList/index",
            "component_name": "whiteList",
            "status": true,
            "cache": false,
            "visible": true,
            "creator": 1,
            "parent": 2
        }
    ]
}

# *****************************************************
# c_list = []
# for i in data.get('data'):
#     if i.get('parent') == 'null':
#         print(i)
#         c = {"id": i.get('id'), "authName": i.get('name'), "path": "", "sort": i.get('sort'), "parent": i.get('parent'), "children": [] }
#         c_list.append(c)
#
# for i in data.get('data'):
#     if i.get('parent') != 'null':
#         for x in c_list:
#             if  i.get('parent') == x.get('id'):
#                 c = {"id": i.get('id'), "authName": i.get('name'), "path": i.get('path'), "sort": i.get('sort'),
#                      "parent": i.get('parent'), "children": []}
#                 x.get('children').append(c)
#
#
# print(c_list)

# *****************************************************

# parent_list = []
children_list = []
merge_list = []
# 根据 sort 的值排序
menu_list = sorted(data.get('data'), key=lambda obj: obj.get('sort'))
for i in menu_list:
    if i.get('parent') == 'null':
        merge_list.append(
            {"id": i.get('id'), "authName": i.get('name'), "path": "", "sort": i.get('sort'), "parent": i.get('parent'),
             "children": []})
    else:
        children_list.append(i)

for children in children_list:
    for parent in merge_list:
        if children.get('parent') == parent.get('id'):
            parent.get('children').append(str({"id": children.get('id'), "authName": children.get('name'),
                   "path": children.get('path'), "sort": children.get('sort'),
                   "parent": children.get('parent'), "children": []}))

print(merge_list)
import  json
merge_list = json.dumps(merge_list)
print(merge_list)
xxx = [
    {
        "id": 125,
        "authName": "用户管理",
        "path": "users",
        "children": [
            {
                "id": 110,
                "authName": "用户列表",
                "path": "users",
                "children": [],
                "order": null
            }
        ],
        "order": 1
    },
    {
        "id": 103,
        "authName": "权限管理",
        "path": "rights",
        "children": [
            {
                "id": 111,
                "authName": "角色列表",
                "path": "roles",
                "children": [],
                "order": null
            },
            {
                "id": 112,
                "authName": "权限列表",
                "path": "rights",
                "children": [],
                "order": null
            }
        ],
        "order": 2
    },
    {
        "id": 101,
        "authName": "商品管理",
        "path": "goods",
        "children": [
            {
                "id": 104,
                "authName": "商品列表",
                "path": "goods",
                "children": [],
                "order": 1
            },
            {
                "id": 115,
                "authName": "分类参数",
                "path": "params",
                "children": [],
                "order": 2
            },
            {
                "id": 121,
                "authName": "商品分类",
                "path": "categories",
                "children": [],
                "order": 3
            }
        ],
        "order": 3
    },
    {
        "id": 102,
        "authName": "订单管理",
        "path": "orders",
        "children": [
            {
                "id": 107,
                "authName": "订单列表",
                "path": "orders",
                "children": [],
                "order": null
            }
        ],
        "order": 4
    },
    {
        "id": 145,
        "authName": "数据统计",
        "path": "reports",
        "children": [
            {
                "id": 146,
                "authName": "数据报表",
                "path": "reports",
                "children": [],
                "order": null
            }
        ],
        "order": 5
    }
]

# 第一个for拼pid字典,第二个for把id塞进pid的children离去
